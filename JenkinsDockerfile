pipeline{
agent any
stages{
stage("copy artiface"){
steps{
copyArtifacts filter: 'target/demoart.war', fingerprintArtifacts: true, projectName: 'Warfile', selector: lastSuccessful()
}
}

stage("docker build"){
steps{
sh ''' sudo docker build -t sheelademo/helloworldapp . '''
}
}

/* stage("docker tag image"){
steps{
sh ''' docker tag helloworldapp sheelademo/sheeladocker/helloworldapp '''
}
}

*/

stage("docker login"){
steps{
script{
withDockerRegistry(credentialsId: 'sheelademo', url: 'https://index.docker.io') {
   
   sh '''  echo successfully logged into docker '''  
}
}
}
}

stage("docker push"){
steps{
  sh '''  docker push sheelademo/helloworldapp '''
}
}

}
}

